# UI 重构任务 - 2026-01-31

## 任务描述
根据 Pencil 设计图完全重构应用 UI，对齐设计规范。

## 设计图页面
1. **首页** - 视频库瀑布流展示
2. **用户管理** - 用户列表 + 添加用户弹窗
3. **下载任务** - 任务列表 + 新建任务弹窗 + 统计面板
4. **系统设置** - 存储设置 + AI 设置 + 危险区域

## 设计变量
```css
--accent-primary: #FE2C55
--accent-secondary: #25F4EE
--bg-active: #FEE2E8
--bg-primary: #FDFCFB
--bg-surface: #FFFFFF
--bg-hover: #F7F5F3
--border-color: #EAE6E1
--text-primary: #312E2A
--text-secondary: #7A7570
--text-muted: #B8B2AD
--font-primary: Inter
--font-mono: JetBrains Mono
--radius-lg: 12px
--radius-md: 8px
--radius-sm: 4px
```

## 待办清单
- [x] 分析 pencil 设计图结构
- [x] 重构首页(视频库)界面
- [x] 重构用户管理界面
- [x] 重构下载任务界面
- [x] 重构系统设置界面
- [x] 验证并测试重构后的界面

## 执行结果

### 架构变更
- 创建 `src/renderer/src/components/AppLayout.tsx` - 全局布局组件（240px侧边栏 + 主内容区）
- 更新 `src/renderer/src/routes/index.tsx` - 扁平化路由结构
- 更新 `src/renderer/src/assets/base.css` - 更新设计系统变量

### 页面重构
1. **首页 (HomePage.tsx)** - 视频库卡片网格布局，标签筛选栏
2. **用户管理 (UsersPage.tsx)** - 用户列表表格 + 快捷添加卡片 + 模态弹窗
3. **下载任务 (DownloadPage.tsx)** - 双栏布局（任务列表 + 统计面板），状态标签，新建任务弹窗
4. **系统设置 (SystemPage.tsx)** - 简化设计（常规设置、AI设置、危险区域三个卡片）

### UI 特性
- 统一配色：TikTok 粉色主题 (#FE2C55)
- 统一圆角：12px 卡片，8px 按钮/输入框
- 统一边框：#EAE6E1
- 统一字体：Inter (正文) + JetBrains Mono (代码)
- 自定义切换开关（Toggle）组件
- 自定义下拉选择器
- 响应式布局支持

### TypeScript
- 渲染进程类型检查通过 ✅
- 主进程存在预先存在的类型问题（与本次重构无关）

---

## 视频预览组件重构 (MediaViewer)

### 任务描述
根据 Pencil 设计图重构视频预览弹窗，并实现相关推荐算法。

### 设计实现
- **双栏布局**: 左侧视频区域 (380px) + 右侧内容区域 (400px)
- **视频区域**: 黑色背景、播放按钮覆盖、视频控制条
- **内容区域**:
  - 标题行 + 圆形关闭按钮
  - 标签行 (粉色标签 #FEE2E8/#FE2C55)
  - 作者行 (头像 + 昵称/粉丝 + 点赞/评论统计)
  - 分割线
  - 下载按钮 (全宽，主题色 #FE2C55)
  - 相关推荐区域 (3个视频缩略图)

### 相关推荐算法
优先级评分机制:
1. **同作者**: +10 分
2. **每个匹配标签**: +3 分
3. **同类型内容**: +1 分
4. 按分数降序排列，取前3个
5. 不足3个时补充随机视频

### 文件变更
- `src/renderer/src/components/MediaViewer.tsx` - 完全重写
- `src/renderer/src/pages/HomePage.tsx` - 传递 allPosts 和 onSelectPost 属性

### 验证结果
- 渲染进程类型检查通过 ✅
