# 下载路径变更时文件迁移功能

## 任务描述
实现下载路径变更时的文件迁移功能，当用户更改下载路径时，提示用户是否将已下载的视频文件迁移到新路径。

## 完成的工作

### 1. 数据库层 (database/index.ts)
- `getPostsForMigration(oldBasePath)`: 获取所有路径以 oldBasePath 开头的帖子
- `updatePostPaths(id, videoPath, coverPath, musicPath)`: 更新帖子的路径记录

### 2. IPC 通信层 (main/index.ts)
- `migration:execute`: 执行文件迁移
  - 获取需要迁移的帖子列表
  - 创建目标目录
  - 移动文件（优先 rename，跨文件系统时 copy + delete）
  - 更新数据库路径记录
  - 返回迁移结果（成功/失败数量）
- `migration:getCount`: 获取需要迁移的文件数量

### 3. Preload API (preload/index.ts, preload/index.d.ts)
- `migration.execute(oldPath, newPath)`: 执行迁移
- `migration.getCount(oldPath)`: 获取迁移文件数量
- 添加 `MigrationResult` 和 `MigrationAPI` 类型定义

### 4. 前端 UI (SystemPage.tsx)
- 保存下载路径时检测路径是否变更
- 如果变更且旧路径有文件，弹出迁移确认弹窗
- 显示待迁移文件数量、旧路径、新路径
- 提供"迁移文件"和"跳过迁移"两个选项
- 迁移过程中显示 loading 状态
- 迁移完成后显示结果通知

## 用户体验流程
1. 用户在系统设置中修改下载路径
2. 点击"保存下载设置"
3. 系统检测到路径变更，查询旧路径中的文件数量
4. 如果有文件，弹出迁移确认弹窗
5. 用户选择：
   - "迁移文件"：自动移动文件并更新数据库
   - "跳过迁移"：仅保存设置，不移动文件
6. 显示操作结果

## 修改的文件
- `src/main/database/index.ts`
- `src/main/index.ts`
- `src/preload/index.ts`
- `src/preload/index.d.ts`
- `src/renderer/src/pages/settings/SystemPage.tsx`

## 执行结果
- [x] TypeScript 类型检查通过
- [x] 项目构建成功
