# 修复视频解析下载功能 & 视频进度条拖动

## 任务描述
1. 修复视频/图集链接解析下载功能无法正常工作的问题
2. 修复首页视频播放器无法拖动进度条的问题

---

## 问题1：视频解析失败

### 问题分析
`video:getDetail` handler 中，错误地将 `fetchVideoDetail` 返回的 `PostDetailFilter` 类实例当作原始 API 响应数据处理。

### 解决方案
直接使用 `PostDetailFilter` 的 getter 方法获取已处理好的 URL：

```typescript
const coverUrl = detail.cover || detail.animatedCover || ''
videoUrl: detail.videoPlayAddr?.[0] || ''
imageUrls: detail.images || []
```

---

## 问题2：视频进度条无法拖动

### 问题分析
`local://` 协议处理器不支持 HTTP Range 请求。浏览器在拖动视频进度条时会发送 Range 请求获取指定字节范围的数据，如果服务器不支持，则无法实现视频跳转。

### 解决方案
重写 `local://` 协议处理器，支持 Range 请求：

```typescript
protocol.handle('local', async (request) => {
  const rangeHeader = request.headers.get('Range')
  if (rangeHeader) {
    // 解析 Range: bytes=start-end
    // 返回 206 Partial Content 响应
    return new Response(buffer, {
      status: 206,
      headers: {
        'Content-Range': `bytes ${start}-${end}/${fileSize}`,
        'Accept-Ranges': 'bytes'
      }
    })
  }
  // 无 Range 请求时返回完整文件
  return net.fetch(`file://${filePath}`)
})
```

---

## 修改文件
- `src/main/index.ts`
  - 修复 `video:getDetail` handler
  - 重写 `local://` 协议支持 Range 请求

## 待办
- [x] 修复 video:getDetail handler 使用正确的 getter 方法
- [x] 添加 local:// 协议的 Range 请求支持
- [ ] 测试视频进度条拖动
- [ ] 测试视频解析和下载
