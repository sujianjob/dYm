# 用户同步系统重构

## 任务描述
将下载任务系统重构为基于用户的同步模型，支持定时自动同步。

## 待办清单
- [x] 数据库添加用户同步相关字段 (auto_sync, sync_cron, last_sync_at, sync_status)
- [x] 创建同步服务 syncer.ts
- [x] 添加 cron 调度器 scheduler.ts
- [x] 更新 preload API (SyncAPI, SyncProgress)
- [x] 重构用户页面 UI（添加同步设置）
- [x] 修复 TypeScript 错误并验证构建

## 执行结果

### 数据库变更
- 新增字段: `auto_sync`, `sync_cron`, `last_sync_at`, `sync_status`
- 新增函数: `updateUserSyncStatus()`, `getAutoSyncUsers()`

### 新增服务
- `src/main/services/syncer.ts` - 用户同步核心逻辑
- `src/main/services/scheduler.ts` - Cron 定时调度器

### API 变更
- 新增 `SyncAPI` 接口: start, stop, isRunning, getAnySyncing, validateCron, updateUserSchedule, onProgress
- 更新 `DbUser` 接口添加同步相关字段
- 更新 `UpdateUserSettingsInput` 接口

### UI 变更
- 用户列表新增"同步"列，显示同步状态和操作按钮
- 编辑用户对话框新增同步设置区域（自动同步开关、Cron 表达式）

### 修复的 TypeScript 错误
1. `scheduler.ts` - 修复 `cron.ScheduledTask` 类型引用
2. `syncer.ts` - 移除未使用的 `DbUser` 导入
3. `preload/index.ts` - 修复 `updaterAPI.install` 返回类型
4. `UsersPage.tsx` - 移除未使用的 `handleCreateDownloadTask` 函数

## 构建验证
- TypeScript 类型检查: ✅ 通过
- 项目构建: ✅ 成功
