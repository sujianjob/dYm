# 用户编辑与批量管理功能

## 任务描述
- 添加用户信息编辑功能
- 添加批量编辑功能
- 添加用户级别的下载数量限制

## 待办清单
- [x] users 表添加 max_download_count 字段（用户级别下载限制）
- [x] users 表添加 remark 字段（用户备注）
- [x] 添加用户编辑对话框
- [x] 添加批量编辑功能
- [x] 修改下载逻辑支持用户级限制

## 修改内容

### 数据库变更 (src/main/database/index.ts)
1. 新增迁移：`max_download_count` 列（INTEGER，默认0表示使用全局设置）
2. 新增迁移：`remark` 列（用户备注）
3. 新增 `UpdateUserSettingsInput` 接口
4. 新增 `updateUserSettings` 函数 - 更新单个用户设置
5. 新增 `batchUpdateUserSettings` 函数 - 批量更新用户设置

### IPC 通信 (src/main/index.ts)
1. 新增 `user:updateSettings` 处理器
2. 新增 `user:batchUpdateSettings` 处理器

### Preload API (src/preload/index.ts, index.d.ts)
1. `DbUser` 接口新增 `max_download_count` 和 `remark` 字段
2. `UserAPI` 新增 `updateSettings` 和 `batchUpdateSettings` 方法
3. 新增 `UpdateUserSettingsInput` 接口

### 下载逻辑 (src/main/services/downloader.ts)
- 下载时优先使用用户的 `max_download_count`，如果为0则使用全局设置

### 用户管理界面 (src/renderer/src/pages/settings/UsersPage.tsx)
1. 新增列：复选框（用于批量选择）
2. 新增列：下载限制（显示用户级别或"全局"）
3. 新增编辑按钮（铅笔图标）
4. 新增批量编辑按钮（选中用户后显示）
5. 新增用户编辑对话框：
   - 备注输入框
   - 单次下载限制输入框
   - 首页显示开关
6. 新增批量编辑对话框：
   - 单次下载限制输入框
   - 首页显示开关

## 功能说明

### 用户编辑
点击用户行的编辑按钮（铅笔图标），可编辑：
- **备注**：自定义备注，会显示在用户列表中
- **单次下载限制**：0表示使用系统全局设置，>0则使用该数值
- **首页显示**：控制该用户的作品是否在首页显示

### 批量编辑
1. 勾选多个用户
2. 点击"批量编辑"按钮
3. 设置下载限制和首页显示
4. 点击"应用"

### 下载限制优先级
用户级别 > 全局设置（用户设为0时使用全局）
